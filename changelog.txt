Domibus 5.1.9
- Added new properties domibus.msh.retry.maxMessageCount and domibus.messages.stuck.maxMessageCount to limit the number of messages that can be retried in a single run. They are useful to prevent excessive load on the system when there are many messages in the WAITING_FOR_RETRY or SEND_ENQUEUED status.
- Merged the deprecated ongoing messages sanitizer with the newer unsent messages sanitizer job
- Improved logic of the retry worker to ignore the retry policies of PULL messages and to avoid conflicts with the sanitizer job
- Add new properties in Domibus to limit the maximum number of days taken into account for the earchiving jobs
        domibus.earchive.continuous.time_window_limit
        domibus.earchive.sanitizer.time_window_limit
- Added possibility to opt-out from eArchiving-related alerts
- Added new optional properties domibus.diagnostics.cron and domibus.diagnostics.list for configuring regular diagnostics data in the logs. By default diagnostics are disabled. Diagnostics can also be obtained using /ext/diagnostics/version, /ext/diagnostics/jmsQueuesInfo, /ext/diagnostics/alerts and /ext/diagnostics/messages with a plugin user having ROLE_ADMIN.
- Fixed error preventing the user from clicking 'Resend all' in the Messages page of the Admin Console
Domibus 5.1.8
- Add new optional attribute asyncNotification to the leg configuration in the Pmode. If this boolean attribute is set then, if true, it enables asynchronous processing of notifications, or, if false, it makes processing notifications synchronously. When the attribute is set, it overrides the plugin's behavior. If the attribute is not present on the leg, then the plugin's behavior is used as before.
- Fix issue with PULL error received when sending pull request for an already-known party after sending the test message.
- Fix issue with pull locking mechanism on Oracle causing delays under high concurrency.
- Fix error receiving the pull receipt in a non-separator configuration.
- Enable throttling when no message to be pulled.
- Enhance business logs.
- Fix issue with JMSCorrelationId not set in replyMessages.
- Fix issue with message status changed notification when delete_message_metadata="true".
- Fix issue with Oasis SMP 1.0/2.0 documents not parsed with root element with prefix.
- Ensure that thread Authentication context is cleaned after finishing thread tasks.
- Conduct OWASP vulnerabilities scan and update libraries.
- Message payloads on the filesystem are not deleted when partitions are dropped.
- Improve DSS settings related to HTTP downloads.
- Add quartz properties to help the job management in a clustered environment:
        domibus.quartz.jobStore.misfireThreshold
        domibus.quartz.jobStore.acquireTriggersWithinLock
- Add new property in Domibus to enable/disable the trust verification, set to true by default
        domibus.extension.iam.trust.enabled
Domibus 5.1.7
- Upgrade CXF to the latest compatible version
- Fix issue with missing receipt notification.
Domibus 5.1.6
- Add support for custom properties in the JMS plugin
- Improved the information provided in the BUSINESS logs and added more codes.
- Added property domibus.sender.trust.validation.signal.sync.onreceiving. If activated Domibus will verify before receiving syncronously a signal message following a push or pull request, that the sender certificate is valid and not revoked
- Updated the description of default.domibus.sender.trust.validation.onreceiving. If activated Domibus will verify before receiving a User Message when using Push/Pull or a Signal Acknowledgement (NRR) when using Pull, that the sender certificate is valid and not revoked. When disabled, none of the other checks are performed on the sender's certificate.
- Fixed issue related to expired partition purging and added a new property to limit the number of partitions dropped in one run of the retention worker.
- Double click on a message should populate all fields for that message
- Added diagnostic logging in case of a pMode mismatch or a submission error
- Improved the sql scripts by removing the unnecessarily dropping and recreating an index
- Fixed issue with message sanitizer failing at first message
- Consider QUEUED batches in batch sanitiser
- Upgraded Tomcat 9 to the latest version 9.0.91
- Libraries upgrades to fix OWASP vulnerabilities
Domibus 5.1.5
- New property to enforce strong rules for all Domibus properties of type password
- Update the configuration of Weblogic datasource, eDeliveryDs, to disable support for global transactions
- Security updates on the libraries and Domibus APIs
Domibus 5.1.4
- Added endpoint for refreshing DSS Trusted lists. Can be accessed with POST /ext/trustedlists/refreshoperation
- Added domibus properties for quartz data source in Tomcat
- Renamed edeliveryNonXA datasources to eDeliveryMysqlNonXADS and eDeliveryOracleNonXADS in wildfly standalone-full.xml file
- Removed edeliveryNonXA datasources for weblogic from cli and properties files
- removed eDeliveryMysqlNonXADS and eDeliveryOracleNonXADS datasources from wildfly standalone-full.xml file
- Improved the self sending mechanism
- Added property for disabling the use of system default certificates (cacerts) on https downloads (CRLs).
- Added property for logging messages that are being sent but which have been enqueued for more than a specific duration
- Added support for special characters in message ids
- Improved the handling/persistence of digital certificates
- Handle receipts with the same message id
- Upgraded Tomcat 9 to the latest version 9.0.86
- Fix issue with duplicate messageIds in listPending messages
- Updated default value for property "domibus.dynamicdiscovery.peppolclient.partyid.responder.role"
- Added new property "domibus.sender.trust.dynamicReceiver.validation.expression"
- Updated property name from "domibus.cacerts.validation.enabled" to "domibus.cacerts.download.enabled"
- Added new property "domibus.pmode.legconfiguration.mpc.enabled"
- Added new property "domibus.partIdType.validation.pattern"
- Added new property "domibus.ongoingMessagesSanitizing.worker.delay.hours"
- Added new property "domibus.logging.sendMessage.enqueued.max.minutes"
- Updated description of property "domibus.sender.trust.validation.expression"
- Updated description of property "domibus.database.schema"
Domibus 5.1.3
- Fix logback collision error in multitenant setups, the ${domainName} string should be replaced in the <domain_name>_logback.xml with the actual <domain_name>
Domibus 5.1.2
- Optimise HQL queries by eliminating unnecessary cross joins, resulting in enhanced overall performance.
- Users can now update the truststore with varying types and passwords, increasing adaptability.
- Enhancements in the dynamic discovery process contribute to a more stable and reliable operation.
- Added support for dynamic discovery wildcard search
- Relaxed the restriction of service and action values validation in message filter creation
- Added properties domibus.pmode.validation.action.pattern and domibus.pmode.validation.service.value.pattern to validate action and service when updating a pMode
- External API to get certificate of the party returns a ResponseEntity of TrustStoreDTO as per the OAS specification.
- New worker which reschedules unsent messages stuck in SEND_ENQUEUED and WAITING_FOR_RETRY statuses
- New worker which reschedules eArchive batches stuck in STARTED statuses
- Cache configuration for extensions can be done using default ehcache file *-extension-default-ehcache.xml. The expected location (in a Java project) is: /src/main/resources/config/ehcache/*-extension-default-ehcache.xml which will go to .jar file of the extension into e.g. /config/ehcache/ext1-extension-default-ehcache.xml location
- Cache configuration for extensions can be overridden by a configuration file named *-extension-ehcache.xml (e.g ext1-extension-ehcache.xml) added to /conf/domibus/extensions/config/
- Moved dss-cache in /extensions/config/dss-extension-ehcache.xml
- Removed domibus cache statistics duplicates from JMX consoles
- Upgraded Tomcat 9 to the latest version 9.0.83
- This version includes library upgrades to mitigate known vulnerabilities, enhancing system security.
Domibus 5.1.1
- Removed the SQL scripts from the full distributions of Tomcat and Wildfly. The archive with these scripts can be downloaded separately
- Removed property domibus.fourcornermodel.enabled
- Added properties domibus.ui.pages.messageLogs.landingPage.enabled and domibus.ui.pages.messageLogs.search.advanced.enabled to control the message log admin page in regards with high performance requirements
- Updated all the domibus.UI.title.name domain property names to domibus.ui.title.name
- Updated all the property names prefixed with domibus.metrics.sl4j to domibus.metrics.slf4j
- Fixed the dynamic discovery mechanism for a high concurrency scenario
- Dynamically discovered certificates are deleted after their retention period expire
- Possibility to change the second level cache provider, choosing between Infinispan (default) and Ehcache
- Maximum number of upload file size is global
- Improve performance of the Messages page
- eArchiving batches are deleted immediately after being archived
- Fix OWASP vulnerabilities
Domibus 5.1
- Add property for disabling the use of system default certificates (cacerts) on https exchanges.
- Added 2 methods to the EnableAware interface: shouldCoreManageResources, to know if domibus manages plugins resources and getMessageListenerContainerFactory to obtain the factory from here
- Added a new method to the WS plugin interface to getStatus based on the messageId and the role of the access Point. The old method to getStatus based on messageId is marked as deprecated.
- Removed domainValidity cache since the call to validate domains is done once now.
- Replaced old Backend interface from the WS plugin distribution with the new wsplugin interface (wsdl and xsds)
- Simplified the creation of alerts: no need for custom property change listener, event queue listener, enqueue method or module configuration class
- Added two internal API to resend selected failed messages and resend all failed messages as batches from the admin console.
- Added property domibus.earchive.batch.size.payload to specify a total payload size limit of all archived messages in a batch
- Added properties for the party ID type and responder role that are specific to Oasis and Peppol
- Update the property types for activeMQ.JMXURL and activeMQ.brokerName to a comma-separated list to allow users to define multiple ActiveMQ broker entries for networks of brokers or brokers in a Master-Slave setup
- Split DatabaseMessageHandler bean in 3 beans (MessageSubmitter, MessageRetriever, MessagePuller), each implementing just one interface
- New Keystore page in the Domibus Admin Console
- Smart retry introduced for failed messages retrials (now taking advantage of the monitoring and attempting retry only after remote party is reachable)
- Progressive retry feature introduced (in addition to constant). Retry attempts can now be scheduled with gradually increasing intervals
- Files can be sent to WS Plugin as references to the filesystem
- Added new retention policy for metadata - by setting delete_message_metadata and retention_metadata_offset the user can keep the metadata after the payload was deleted
- Changed MySQL dialect from MySQL5InnoDBDialect to MySQL8Dialect
- Disable metrics features by default (logging, memory, garbage collector, cached threads and jms queues)

Domibus 5.0.10
- Added property domibus.sender.trust.validation.signal.sync.onreceiving. If activated Domibus will verify before receiving syncronously a signal message following a push or pull request, that the sender certificate is valid and not revoked
- Updated the description of default.domibus.sender.trust.validation.onreceiving. If activated Domibus will verify before receiving a User Message when using Push/Pull or a Signal Acknowledgement (NRR) when using Pull, that the sender certificate is valid and not revoked. When disabled, none of the other checks are performed on the sender's certificate.
Domibus 5.0.8
- Improve performance of the Messages page
- Improve the performance of query used for payload handling
- Remove cross joins with dictionary to improve performance
- Improve performance of the partitions retention mechanism
- Authentication errors in console should be logged with WARN instead of INFO
- Improvement in Domibus-UUMDS ICD document
- eArchiving batches are deleted immediately after the ARCHIVED notification is received
- Do not run the migration script if the previous version is not correct
- Stop the execution of the SQL migration scripts when an error is encountered
- Added endpoint for refreshing DSS Trusted lists. Can be accessed with POST /ext/trustedlists/refreshoperation
- Added domibus properties for quartz data source
- Renamed edeliveryNonXA datasources to eDeliveryMysqlNonXADS and eDeliveryOracleNonXADS in wildfly standalone-full.xml file
- Relaxed the restriction of service and action values validation in message filter creation
- Fixed issue in the pMode with reversed party roles in the Pull process. See upgrade info for more details.
- New property domibus.pmode.legconfiguration.mpc.enabled, defines the behavior of Domibus when the Mpc attribute is not present in the UserMessage.
- Added properties domibus.pmode.validation.action.pattern, domibus.pmode.validation.service.value.pattern and domibus.pmode.validation.service.type.pattern to validate action and service when updating a pMode
- Added property domibus.security.provider.bouncyCastle.position to define the position of the Bouncy Castle in the security providers list
- New worker which reschedules unsent messages stuck in SEND_ENQUEUED and WAITING_FOR_RETRY statuses
- New worker which reschedules eArchive batches stuck in STARTED statuses
- Cache configuration for extensions can be done using default ehcache file *-extension-default-ehcache.xml. The expected location (in a Java project) is: /src/main/resources/config/ehcache/*-extension-default-ehcache.xml which will go to .jar file of the extension into e.g. /config/ehcache/ext1-extension-default-ehcache.xml location
- Cache configuration for extensions can be overridden by a configuration file named *-extension-ehcache.xml (e.g ext1-extension-ehcache.xml) added to /conf/domibus/extensions/config/
- Moved dss-cache in /extensions/config/dss-extension-ehcache.xml
- Removed domibus cache statistics duplicates from JMX consoles
- Upgraded Tomcat 9 to the latest version 9.0.85
- Upgraded Wildfly version to 26.1.3.Final
- Upgrade Angular to version 16 and perform multiple UI fixes
- Implement test to detect library duplicates between domibus core and the plugins/extensions
- Add primary keys on tables missing the primary keys
Domibus 5.0.7
- Fix OWASP vulnerabilities
Domibus 5.0.6
- Add validation to check there is no duplicate dependencies in the distributions (tomcat, weblogic and wildfly)
- [WSPLUGIN] Distribution files have a wsdl folder with wsdl for the the wsPlugin client and the backend client for the push functionality.
- Removed the SQL scripts from the full distributions of Tomcat and Wildfly. The archive with these scripts can be downloaded separately
- Improve error details for following errors: Unable to retrieve OCSP, Path does not chain with any of the trust anchors, The signature or decryption was invalid and WstxUnexpectedCharException
- Expose the metrics API on the /ext services with basic authentication
- Clean Domibus property names and their comments
Domibus 5.0.5
- Added domain properties domibus.ongoingMessagesSanitizing.* to configure the job searching for messages stuck in ongoing statuses and the resulting email alert
- Improved upload time for large (MB) pMode files
- Disabled metrics features by default (logging, memory, garbage collector, cached threads and jms queues)
- Added domain properties domibus.logging.remote.certificates.print and domibus.logging.local.certificates.print to enable printing of the remote and local certificates used to encrypt, decrypt, sign or verify trust for outgoing and incoming messages. Default to false.
- Add reverse index to improve the performance of the Admin Console
- Implement interval partitioning
- Fix duplicate signal message id error
Domibus 5.0.4
- Fixed OWASP vulnerabilities
Domibus 5.0.3
- Fixed partition creation/dropping issue
- Fixed the error when trying to use a PKCS12 format for the keystore
- Created an API to move messages in final status to DELETED
- Fixed issue when fsplugin.messages.location to point another disk (Windows) files are not picked up
- Fixed issue causing that after DB migration from 4.2.11 to 5.0.1, Domibus fails to start at first two attempts
- Fixed OWASP vulnerabilities
- Fixed for show domain checkbox is not present in property page
Domibus 5.0.2
- Fixed issue related to wrong final recipient used when using dynamic discovery in a cluster environment
- Possibility to have a separate log containing all errors
- Added a timer in order to load drop wizard queue metrics after application initialization.
- Default value of domibus.metrics.monitor.jms.queues.refresh.period changed to 10
Domibus 5.0.1
- Added a new plugin notification called MessageResponseSent, fired right before the response to the c2 is sent, which means that the raw envelope of the signal is accessible.
- Filter out TEST messages from eArchived messages
- Updated two eArchive properties default values: domibus.earchive.export.empty set to false and domibus.earchive.batch.retry.timeout set to 0.
- Updated http timeouts for MSH communication
- Fixed the properties issue for ext/messages/acknowledgments/delivered API"
- Added possibility to throw a specific exception while receiving a message in the plugin
- Update the property types for activeMQ.JMXURL and activeMQ.brokerName to a comma-separated list to allow users to define multiple ActiveMQ broker entries for networks of brokers or brokers in a Master-Slave setup
- Fixed the disabling of a domain added at runtime
Domibus 5.0
- Send alert when partitions are not properly created in advance
- Fixed issue when MessageProperties is missing in ebMS3 message
- Added a property domibus.dynamicdiscovery.lookup.cache.ttl to define seconds for caching dynamic discovery data.
- WS Plugin getErrorMessages Request will return an exception in case message ID is not found
- Added a property domibus.ui.pages.messageLogs.interval.default=24 for configuring the initial time interval for filtering message logs
- Improved overall performance including refactoring of the database to allow partitioning
- Optimized pull locking for Oracle
- Possibility to use an external eArchiving agent
- Possibility to validate incoming UserMessages using a Validation Extension
- Possibility to reference JMS Plugin payloads via HTTP endpoints
- New WS Plugin which uses the edelivery namespace
- New client authentication trust store admin console page
- Added Reset filters button on all pages of Admin Console
- Added possibility to display service and action information in the Domibus Admin console.
- Added possibility to download eDelivery message receipts for non-repudiation purposes in the messages page
- Added a new page in the admin console that displays the TLS Truststore; One can download or upload the truststore or add and remove certificates from this trsut from within this page
- Added a new page in the admin console that displays the active and disabled domains; One can activate or deactivate a domain at runtime from within this page
- Added refresh keystore button on the Domibus Truststore page in admin console to force reading the file from the disk and save it in the DB;
- domibus.security.keystore.* and domibus.security.truststore.* properties are used only the first time domibus starts and persisted in the DB to be used from there on;
- Added possibility to re-read the trust and key stores from the disk by changing the properties above
- Added domain properties domibus.sender.trust.validation.allowedCertificatePolicyOIDs to validate if certificate was issued with one of the listed policies. Validation is performed on top of the existing certificate subject verification defined in domibus.sender.trust.validation.expression.
- Dynamic discovery: added a feature for validation of the CertificatePolicy for the SMP certificates.  Allowed list of policies can be defined in property: domibus.dynamicdiscovery.client.allowedCertificatePolicyOIDs
- Dynamic discovery: added validation of ServiceMetadata Endpoint date validity according to elements from Endpoint/(ServiceActivationDate|ServiceExpirationDate) as specified in new Peppol SMP specification 1.2.0.
- Remove deletion strategy STORED_PROCEDURE
- change domibus.passwordPolicy.pattern, domibus.passwordPolicy.validationMessage, domibus.plugin.passwordPolicy.pattern and domibus.plugin.passwordPolicy.validationMessage properties to enforce 16 chars as a minimum length of passwords for users
- Add HSTS header to admin console REST calls and the property domibus.httpSecurity.httpStrictTransportSecurity.maxAge to configure how much it is kept(default one year)
- Remove overlapping indexes.
- On the Domibus Admin Console, the Messages page displays by default only messages exchanged in the past hour
- Update retry mechanism to consider the retry timeout
- Add alert when expired partition cannot be deleted
- New RetentionWorker to delete entire expired partition
- Add message tables partitioning sql scripts
- EARCHIVING: allows archiving messages sent / received
- ProcessingType allowing to specify if the message should be pushed or pulled has been added in all the domibus plugins.
- new sequence for id generation (in Oracle: sequence, in mysql H2: Table) of the format: yyMMddHHDDDDDDDDDD (ex: 210809150000000050)
- Switch to using UTC to save timestamp values.
- All date time values missing a timezone offset received from Domibus clients are considered to be in UTC offset; all
of the following values point to the same instant - the 21st of July 2021, 12:27:00 [UTC] -:
    - a date value of "2021-07-21T14:27:00+02:00" will be interpreted to have an offset of +02:00;
    - a date value of "2021-07-21T12:27:00" will be interpreted to be in the UTC timezone with a +00:00 offset.
- Update all libraries to the latest version: Apache CXF 3.4.5, Ehcache 3.8.1, Hibernate Validator 6.1.5.Final, ActiveMQ 5.16.3, etc
- Update Apache WSS4J to 2.3.3 to fix an issue reported in Apache Santuario.
- Added a new property domibus.connection.cxf.ssl.offload.enable to allow support for offloading the SSL onto a forward SSL proxy
- WS Plugin listPendingMessages Request will accept following optional parameters in order to filter the pending messages: messageId, conversationId, refToMessageId, fromPartyId, finalRecipient, originalSender, receivedFrom and receivedTo
- WS Plugin can push notifications to a backend web service (notifications and submit message)
- [Mysql8 only]
    - Mysql8 versions older than 8.0.24 throw "ERROR 1067: Invalid default value", if UTC_TIMESTAMP set as default value for timestamp columns when execute 'mysql-5.0-SNAPSHOT.ddl' scripts.
        - This is due to a bug(#101486) in the older mysql8 versions.
        - Execute below command with 'root' user as a workaround to run the 'mysql-5.0-SNAPSHOT.ddl' script.
            - set global sql_mode = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';
- FSPlugin - in multitenancy mode:
    - added specific domain property file e.g domain1-fs-plugin.properties
    - a domain could be disabled - by setting a property e.g. domain1.fsplugin.domain.enabled (default to true) in the specific domain domain1-fs-plugin.properties file
- Removed UI replication mechanism
Domibus 4.2.12
- Added a timer in order to load drop wizard queue metrics after application initialization.
- Default value of domibus.metrics.monitor.jms.queues.refresh.period changed to 10
- Fixed CRL loading issue for large CRLs
- Fixed proxy timeout issue for failed proxy authentication (401 & 407 error codes)
Domibus 4.2.11
- Added a new property domibus.jms.internal.address.expression - to ignore internal JMS addresses in Wildfly when building the address mappings
- Disable business, security and statistics logging in the default logback configuration
Domibus 4.2.10
- Fix issue with domain name case
- Fixed a bug when Domibus accepts messages signed with key corresponding to a different party
- Updated Wildfly version to 26.1.0
- Update several libraries to the latest version
Domibus 4.2.9
- Updated several libraries
Domibus 4.2.8
- Fixed issue when MessageProperties is missing in ebMS3 message
- Upgraded Tomcat 9 to the latest version 9.0.59
Domibus 4.2.7
- Upgraded Spring to the latest version
Domibus 4.2.6
- Upgrade DSS library to version 5.8.
- The following properties have been added into the authentication-dss-extension.properties file to configure DSS 5.8 data loader:
    - domibus.dss.data.loader.socket.timeout=6000
    - domibus.dss.data.loader.connection.timeout=6000
Domibus 4.2.3
- Fixed the move of messages from the DLQ queue
- Fixed an issue when receiving a message without a payload
- Fixed DSS Refresh Connection timeout parameter
- Fixed typo on tomcat context.xml
- Fixed an issue when a message is deleted when using default MPC issue
- Fixed an issue when Domibus does not start when using multitenancy
- Update Tomcat distributed full version to the latest one
- Create index for TB_ERROR_LOG to improve purging time
Domibus 4.2.2
- Handle runtime error while dispatching SEND_ENQUEUED messages.
- Add http timeout for certificate CRL download.
- Renamed procedures and several indexes to match Oracle 11g constraints.
- Added new property 'domibus.action.resend.wait.minutes' - Minimum expected waiting time for 'Resend' action, for the received messages get stuck in SEND_ENQUEUED status.
- Properties for fs-plugin purges (messages.sent.purge.expired, messages.failed.purge.expired, messages.received.purge.expired, messages.locks.purge.expired) expiration limit if 0 or empty: purge disabled
- Resend failed messages is not stable
- NullPointer for default delete message mechanism for messages in SEND_FAILURE
- Fixed REST endpoint for SEND_FAILURE Messages
- Fixed issue in the  mysql-4.2.1-to-4.2.2-migration.ddl
Domibus 4.2.1
- Use DefaultMPC value for User Messages received without the optional MPC attribute.
- Improve performance of the default view of the Messages page in Domibus Admin Console.
- Enhance the retention worker deletion strategies.
- Upgraded several libraries: CXF 3.3.9, BouncyCastle to 1.67
- Fix known issue about class cast exception on OpenJDK11 (11.0.10.0.9)
- Property domibus.logging.cxf.limit has been increased to 18000 (the size limit at which messages are truncated in the logs)
Domibus 4.2
- Added a new property domibus.logging.metadata.print - prints the AS4 metadata in the logs when org.apache.cxf is set to at least INFO in logback.xml. Defaults to true.
- Deprecated the following classes/methods:
    - eu.domibus.plugin.NotificationListener
    - eu.domibus.plugin.NotificationListenerService
    - eu.domibus.submission.WeblogicNotificationListenerService
    - eu.domibus.ext.services.DomibusPropertyManagerExt.setKnownPropertyValue(java.lang.String, java.lang.String, java.lang.String)
    - eu.domibus.ext.services.PModeExtService.updatePModeFile(byte[], java.lang.String)
- Use Domibus nested property mechanism for DSS dynamic properties for constraints and custom trusted list
- Possibility to change some DSS extension properties at runtime
- Possibility to define a higher priority for specific messages to be sent
- New isAlive RestService in DomibusCore to add to E2E Monitoring
- Possibility to monitor the connection state between C2 and C3
- API for adding/updating participants
- Extend the retention policy mechanism
- Domibus Support of Open JDK 11
- Default JMS Plugin – different queues depending on service/action
- Upgrade Wildfly to version 20 and dropped support for Wildfly 12 (incompatibilities in the new Artemis 2.x client API)
- UI page for changing the Domibus properties at runtime
- Naming convention of the metrics has changed from upper case metric name to class name.lower case metric name. (EG: OUTGOING_PULL_REQUEST_timer is now named eu.domibus.core.message.pull.PullMessageSender.outgoing_pull_request.timer)
- Added DomibusWorkManager within weblogic.xml to avoid using default work manager.
- Added duplicate entities validations in PMode upload.
- Added a job in FS Plugin that cleans orphaned lock files
- Removed password column from both Users and Plugin Users components/lists( as their values were obscured anyway)
- Added Parties functionality to External REST API calls
- Added new component/page in admin console to monitor test connections; integrated the former test component as details page
- Added domibus.monitoring.connection.party.enabled property which specifies the parties for which to monitor the connection (comma-separated list)
- Added domibus.monitoring.connection.cron property which specifies the frequency of test messages sent to monitor the C2-C3 connections
- Filtered out bean scanning of web and ext sub-packages to avoid multiple bean creation.
- Deleted msh-config.xml and moved one bean to spring-context.xml
- Upgrade Tomcat to version 9 and dropped support for Tomcat 8
- Upgrade MySQL to version 8.0 and dropped support for MySQL version 5
- Upgrade the default MySQL Connector/J bundled inside the full distributions to version 8.0.19
- When caching is active for MSH DispatchClient - Ehcache will ignore size calculations therefore no WARNs will be generated in logs
- Possibility to route JMS messages in the JMS Plugin to specific queues depending on service and action
- Added Foreign Servers support in Weblogic
- Add alert for account enabled.
- maxSize attribute defined in payload profile in PMode is taken in account message exchange - maxSize="2147483647" (normal operations) or maxSize="9223372036854775807" for Split&Join operations
- Added a new domain property: domibus.logging.ebms3.error.print (defaults to true) which prints the raw XML response in the logs in case of EBMS3 error on receiver/sender side (if eu.domibus is put at least on ERROR)
- Improved list pending messages performance in WS plugin
- Perform party roles validation
- Plugins are able now to define Ehcache config files which will be loaded into Domibus Ehcache Manager:
- *-plugin-default-ehcache.xml (classpath jar file) and external *-plugin-ehcache.xml into /plugins/config folder
- Domibus internal tables storing PMode information have been renamed to start with prefix TB_PM_*
- Added new property domibus.ui.resend.action.enabled.received.minutes - how many minutes after message's received date the Resend button will become enabled for messages having SEND_ENQUEUED status
- Add property managers for specific servers
- Implement new exceptions handling
- UI: Improve AlertService implementation
- Download truststore from Domibus admin console.
- Pull mechanism: perform the sending of the receipt via a jms queue.
- Domibus Logging in case of ebMS3 error
- UI: Test Services: Move Update button
- In the party definition modal the OK and Cancel buttons should be always visible
- UI admin console: moving messages in the JMS Monitoring page
- Perform business validation when the Pmode is uploaded via the Admin Console
- Delete Alerts
- Default PModes configuration - bad error is shown if user forgets to edit the blue or red pMode
- Harmonize the use of the Factory beans defined in spring-context.xml file
- UI admin console: Error and confirmation messages are incorrectly hidden when doing other operations
- FS Plugin: Make sure to clean the lock files in case the deletion fails for some reason
- LisPendingMessages should use the database instead of the JMS broker
- Add audit columns in all configuration and run-time tables
- Refactor and simplify the domibus property management
- Alerts - A better mechanism to reset a configuration loader.
- Migrate from Spring XML config to Spring annotations config - part1
- Allow plugins to re-download message & payload until message is deleted
- Upgrade to the latest Angular + Angular Material
- Refactor domibus property loading at bootstrap time.
- JMS Plugin exceptions in logs
- Include date of password expiration in admin console
- Warning before password expiration for plugin users.
- UI: refactor angular forms to avoid deprecated constructs
- Perform business validation when the Pmode is uploaded via the Admin Console - part 2
- Make the Latest SQL Scripts Not Dependent of the Domibus Version
- Simplify CsvExport functionality for the admin console resources.
- Support for Foreign Server in WebLogic
- UI: show a popup to the user in case the current session is expired
- Simplify the MultiDomainAlertConfigurationServiceImpl class
- Add blacklist-like validation for domibus property values
- Evaluate the setting of artemis-amqp-protocol dependency as provided
- Small improvements for backend-client-example project
- Locate and eliminate \n characters where they're explicitly added to log messages
- Plugin user with Role User must complete Original User field
- Internal Xerces class used
- Pmode size limitation not functional anymore
- Duplicate "originalSender" property is accepted.
- PMode[1].Role is not respected for pmode resolution
- Some differences in message parameters between JMS and WS plugins.
- Message error improvement for MSH role.
- When "PartyId" element not present, generic error message is returned.
- Improve error message when role element is not present.
- Improve error message for mandatory message parameters.
- Every thrown EbMS3Exception should contain the messageId
- UI: Harmonize all dialogs in Admin Console
- UI: New user/User Edit "Password do not match" warning small issue
- Expired certificate is not highlighted in the UI
- Datasources JNDI properties should be externalized
- FSPlugin: payload not created when wrong PayloadName is specified
- Both DB and UI accept usernames with non-alphanumeric characters and/or with length less than 4
- Message can be retrieved twice in case of clustered environment.
- [internal] prefix not added on JMS queue names in Wildfly
- NotificationListenerService should log all exceptions faced on plugin notifications
- Schema name is case sensitive in the context of multi-tenancy.
- Users defined in default SQLs can't submit a message
- AP Role field is missing in some errorLog entries
- Load truststore with invalid keystore password
- Replace validation on GUI for CSV export max rows
- Wrong error message when duplicate originalSender or finalRecipient properties present
- Relative path are forbidden for payload filesystem storage location
- UI admin console: pagination-related issue on the JMS Monitoring page
- retentionWorkerJob - clearPayloadData throw exception on Domibus having 5M messages in DB
- UI: The name of the default domain is always "Default", no matter what is written in domibus.properties
- Download message that is not there anymore
- Error when in PMode Parties page after deleting all parties
- Sorting in Audit table is not working
- Null Pointer when service is not configured but present in the leg
- WS-plugin wildfly submit file with MTOM
- Forbidden characters in domain name are allowed.
- Keystore without password protected private key is not accepted
- Domibus not returning signal error messages
- Original Sender and Final Recipient columns present in CSV file downloaded even if domibus.fourcornermodel.enabled=false
- Sorting on the basis of "Custom Prop" & "JMS Prop" is not working properly on JMS Monitoring Page
- empty endpoint not support in PULL mode
- Message stuck in SEND_ENQUEUED status in case keystore/Truststore properties are missing.
- UI: Plugin Users: Can't change username when not unique name used
- Alert emails validation should result with different result for empty and incorrect email
- Rest Resources and Quartzjob are NOT loading PluginClassLoader
- Test service page doesn't show error when certificate is invalid
- Test service page doesn't show error when party is unavailable
- Changing domain will not reset filters in Audit page
- Envelope not parsed by Domibus
- Instead of Confirmation pop up, Delete action is directly cancelled on clicking search button on JMS Monitoring page
- Deleted/Deactivated user/admin still perform actions if admin deleted/deactivated user when he is logged in
- User deletion action is tracked as 'Modified' on Audit page
- Add back-end validation for message filters
- Data validation on Email field on New/Edit user pop up is not proper
- Improve exception messages
- Original user field should be mandatory on add/edit plugin user pop up
- Grid data is not properly refreshed if user changes page size selector value on last page of Users screen
- Login button is shown on Admin console along with left navigation panel and sandwich menu if user add logout in application url
- No alerts created when account is enabled.
- UI: PMode - Archive - banner pop up message after restoring of Pmode
- WeblogicCluster.properties file comment is incorrect
- Issue when re-sending a message in SEND_ENQUEUED state
- Delete Message operation in JMS Monitoring page doesn't require confirmation
- Duplicate entries in the Message filter page are possible for the default entries.
- Editing a user fails without error when admin enters something in the password field and then deletes it
- Special characters in the URL cause stacktrace to be shown in frontend
- When uploading/editing a PMode there should be a verification that it contains a party that describes itself
- Warnings observed at runtime.
- Enhance pull request with multiple party identifier.
- Date formatting on warning certificate is not coherent
- Double-clicking on Upload Pmode may cause problems
- No proper handling of exceptions in domibus property listeners
- Issues with the MSG_STATUS_CHANGED alerts mail template
- Change property at runtime doesn't work for property "domibus.userInput.blackList".
- Change property at runtime doesn't work for property "domibus.certificate.crl.excludedProtocols".
- Prevent Users From Logging Out From a Domibus Page Containing Pending Changes
- Fix the mechanism to update the certificates
- Fix transaction issues when using super user in multitenancy mode
- Error when consuming message using WS plugin - ROLE missing
- Resend message fails
- User left in wrong state after user is disabled or deleted while being logged in
- Improve JMSManager getDestinationSize for Metrics page
- Cannot filter JMS messages by property JMSMessageID using selector filter
- Resend message causes transaction exception
- Adapt the selenium tests after the angular/material upgrade to the latest versions
- On multitenant configuration admin user can access metrics as super user
- Transaction error when resending test message
- Domibus using EU Login but receiving alerts for unused local users.
- Saving parties fails if the grid is filtered
- Property domibus.plugin.passwordPolicy.pattern not asserted for external rest calls.
- Non admin user is able to change properties at runtime.
- Values displayed for integer or boolean domibus properties.
- Error when user filter JMS messages by valid selector
- Issue when adding new plugins
- Downloaded CSV file doesn't match info in grid in PMode Parties page
- Duplicate plugin users created by pressing save multiple times
- Alerts still sent after password policy expiration is disabled.
- Downloading list of JMS messages fails when list is filtered by selector
- JmsManager password not encoded by default
- Remove the CXF version from the User-Agent[EDELIVERY-6929] - Support for WildFly 20
- Disabled save & cancel button after addition of empty message filter type
- Message Log list : the grid columns get duplicated on each domain change
- Parties business logic should be case insensitive
- Name inconsistency for Connection Monitoring page
- Max Send Attempts for test messages
- Record error in Error Log when the receiver's party certificate is not configured
- Password column is blank in Domibus4.2 Version Plugin User GUI
- Error in log when pmode is not properly configured
- Unexpected 404 error when refreshing page
- Help link disappears from page header after page refresh
- Search button is not disabled in Alerts page when user wants to search by invalid data
- Request verification whether config corrections are needed for warnings in PULL mode operation.
- BackendNotifying queue consumers number decrease under load.
- Fix spring context initialisation to avoid for the beans in the web package to be created twice
- FS Plugin does not correctly treat bodyload
- SplitAndJoin not working : Column 'CREATED_BY' cannot be null
- In weblogic cluster updating a truststore in one node isn't reflected in the other.
- ConstraintViolationException while addition of user with username same as deleted user
- Proper data should be present in User field on Audit page if fs plugin and jms plugin filters are added
- Sometimes date widget don't open in JMS Monitoring page
- Some domibus property reads called from the UI fail when logged-in with super or admin
- Setting domibus.file.upload.maxSize property at runtime has no effect on the back-end;
- Message retention issue for failed messages
- Different behaviour of generateReceipt() method between Tomcat and Wildfly
- Setting fsplugin.messages.send.worker.repeatInterval property at runtime causes error and has no effect
- JMS Monitoring issues on wildfly
- Error loading data for 'Domibus Properties' in case of 4.1 version plugins
- Party id shown in Connection monitoring page varies if the party has more than one identifier
- domain.title property change at runtime is not working
- Password encryption does not work when using allow characters
- Sometimes filtering alerts results don't load
- Domibus installation with Tomcat - server shutdown - ERRORs and WARNs observed
- Error in logs for pull message exchange with multiple legs configuration.
- User is able to add all forbidden characters on Domibus Properties page
- Update proxy credentials at runtime.
- Expired failed messages are retried forever
- PMode: payloadProfile validation incomplete
- Pmode size limitation for SplitAndJoin
- Remove qualifiers in the class MessageListenerContainerConfiguration
- DomibusDateFormatter doesn't accept dates without Z at the end or without fractional seconds
- User is able to add duplicate identifier for a particular party from Pmode -current page and Pmode -parties page
- Check JAXB validation and mapping for numerical types
- User is able to add an identifier for red party with partyId and partyIdType same as blue party
- WARN log level not appropriate for test messages
- Weird behavior when starting to send messages too soon
- SplitAndJoin property cannot be read in multi-tenancy
- Default Smtp URL is pointing to localhost
- Message receive failure event is not working
- Property domibus.monitoring.connection.party.enabled can be updated with malicious strings using REST API
- UI: the value of 'super' properties is not correctly displayed on the Properties page
- Wrong response status for the call that gets/sets the value of a non-existent property at runtime
- FS Plugin property management with multiple domains
- Property value for multiple properties are blank on admin console
- Issue with Domibus Quartz jobs in wildfly multitenancy deployment
- Tomcat fails to start with a retry message
- [WILDFLY] Javax.faces SEVERE warning on shutdown
- Property encoding should be fixed
- domibus.attachment.temp.storage.location property is missing in default-domibus properties file for MT
- Error for authentication user for fs plugin is not segregated on the basis of domain
- domibus.alert.plugin.user.login_failure.mail.subject change at runtime is not working
- Pmode validation issue - legs of <process> are not properly validated
- PMode validations should be case insensitive
- Misspelled word in the error message in Users and Plugin Users page
- Submitting the message is failing for dynamic discovery.
- Exception on GlobalPropertyMetadataManagerImpl when domibus is under stress
- Backend filters caching issue in multi-tenancy
- Error in RetryDefaultService leads to infinite warning
- Authorization header is accepting one additional char with Basic while sending message with unsecureLoginAllowed as false
- NullPointerException when disabling a plugin user from Admin console.
- Error for empty party role in case of dynamic discovery configuration.
- Plus sign '+' present in message id is replaced by space while performing a search on Admin console
- We shouldn't have 2 domibus.datasource.xa.property.url properties
- Empty AgreementRef element when sending a message with JMS plugin
- Default value for domain_name.domibus.password.encryption.properties is taken in domibus.properties
- getConfigurationFileName return full path
- Certificate properties to be moved from domain to global. Reset the cache when the property is updated
- Error message exposing class name in an error response
- Whole value is stripped not only the special characters from message property
- Backup property files are created even if all passwords are encrypted
- Transaction-related warning in log when message sending is retried
- Circular dependency in the command execution
- Test messages are not populated correctly when the agreement property is set on the process
- Policy-related exception when sending messages on a specific environment
- All CSV files downloaded from frontend should have the same date-time format
- Dynamical update of Domibus properties when given evironment property
- Extra column "Priority" present in CSV file downloaded from JMS Monitoring page
- Tomcat/Mysql/Multitenancy cannot upload new trustore
- Tomcat/Mysql/Multitenancy cannot delete party
- Domibus JMS Monitoring page and logs - JMS Counts are always zero (0)
- Error message needs to be updated in Connection monitoring page when service not properly configured
- Plugin should be removed from Message filtering page, when the plugin files remove from the plugin config location.
- JMS Message delete/move event is logged in the audit of the currently selected domain not in the domain the message belongs to
- Download PMode from PMode Archive page is logged under PMode table in Audit page
- PMode validation: we should not accept < > characters in party identifiers
- Domibus UI - Audit page count seems wrong
- Wrong Id logged in audit page when only one routing criteria is edited
- Nullpointer exception when self sending message with fsplugin filter selected.
- FsPlugin: .lock files are impacting the sending of files from other sub-folders
- Filtering USER_LOGIN_FAILURE alerts by ACCOUNT_DISABLED = true yields no results
- Too many pull requests sent when domibus configured with multiple legs
- Missing FK on the TB_COMMAND_PROPERTY table
- Few differences in domibus.properties files accross servers.
- UI: In some places, some domibus properties are used with values for domain instead of super
- User is able to delete all message filters from admin console
- Metrics annotation for plugins not working
- Change logging level role restriction
- Wrong error message when creating a plugin user with role USER and without original user
- duplicateDetection is accepting any random values while updating/uploading pmode
- TransactionRequiredException found while deleting message from JMS Monitoring page on Multitenant environment
- Domibus user with role role_user is unable to login into application
- User is unable to send message using split and join feature
- Default partyid@type is adding up in the message
- Properly inform about truststores and keystores loading issues
- Mysql DB script failing 4.2RC release.
- Session expired message right after server restart
- Test Service response not correct
- Domibus not allowing to reset the password from default one and login to application.
- Password policy doesn't appear when editing a user and setting a wrong password
- Error when uploading PMode
- In WildFly the IN/OUT queues should be accessible remotely
- Refactor Domibus packages in order to improve the decoupling of Domibus core from the plugins
- Harmonize exceptions thrown on TypedProperty creation during Submission Creation
- Remaining task to be pull specification compliant.
- Logging in Dynamic Discovery
- Default MPC must not be used for Pull exchanges
- Alert configuration property reading in multi domain scenarious
- Plugin integration improvement in Domibus
- UI components need to be refactored and provide the same experience across all Domibus pages
- Improving Weblogic Cluster Throughput using XA Transaction Cluster Affinity
- Multiple saved user
- Access to the domain scheduler (pause and resume)
- Improve generate receipt method as it takes a lot of the processing.
- DomibusPropertyProvider should take into account multitenancy/non multitenancy mode when getting properties
- Provide sources jar in nexus
- Improve performance on sending
- Improve performance on receiving
- Allow plugin to include default values for ehcache
- Improve the configuration of the Domibus <cxf:bus>
- The Spring beans should not be automatically marked as transactional
- Update all libraries to the latest version
- Remove PModeDao class
- Decouple from JMS/JMX in the plugin notification mechanism
- Display a warning for the user at login if his password will soon expire.
- Unit tests: increase code coverage
- GlobalExceptionHandlerAdvice should be split into 2 parts: core and ext delegate
- Migrate from Spring XML config to Spring annotations config - part2h.
- Improve the property management
- partyIdType is not validated by the PMode business validation
- Improve transaction boundaries and fix transaction timeouts
- FSPlugin issues when PayloadName is missing
- OpenJDK 11 support in backend-client-example
- Domibus default plugins behaviour on submitting message with non existing party
- Fix the issues in the SQL scratch/upgrade scripts
- PMode validators refactoring
- Refactor alert feature
- Enhance plugin cookbook to include how to set domain mdc
- Modify the handling of the WSPlugin properties
- Fix expiration queue warnings in WildFly
- Atomikos-related errors in Tomcat When JMS Properties Changed at Runtime
- Possibility for plugins to execute commands in a cluster
- Prefix all database tables where PMode is stored with tb_pm_
- Fix sending properties when commands are executed
- Delete unused tables in Domibus
- Remove the usage of deprecated methods in the default plugins
- Duplicate properties validations in Pmode
- Wrong dependency between msh and ext module
- Add remarks to TB_COMMAND/TB_COMMAND_PROPERTY tables
- Maximum length of Pmode's URI attributes(endpoint, partyIdType's value, Mep's value, binding's value and 'schemaFile' attribute of payload) extended from 255 to 1024.
Domibus 4.1.6
- Fixed an issue in the FSPlugin when PayloadName property is missing
- Fixed an issue while receiving a message using PKIPath
- Updated Spring, ActiveMQ and Jackson libraries
Domibus 4.1.5
- AS4 String message properties has been increased from 255 characters to 1024
- Synchronization of Certificate verification security level of the SMP certificate in dynamic discovery for Peppol and Oasis.
- Added manual runtime registration for the BouncyCastle provider
- Added JMS message property 'finalRecipientType' in the JMS Plugin, which is required to send JMS message in Dynamic discovery for SMP lookup.
- Remove unnecessary jmx looping when looking up destination in weblogic jms manager
- Domibus: print payload=false doesn't strip payload for retrieveMessage operation
- User field data gets overwritten on Audit page in case of Message resend event
- Proxy does not work when password is encrypted
- Issue on MySQL script: Columns from TB_CERTIFICATE and TB_SEND_ATTEMPT tables are TIMESTAMP instead of DATETIME
- Domibus 4.1.2 and 4.1.3 does not use BouncyCastle provider in WebLogic
- Domibus prints the message id in the logs after message is not being used
- Domibus sends password expired alerts for plugin users despite password expiration is disabled
- Multiple clients concurrently requesting messages from the Default WS Plugin leads to duplicate messages
- Domibus does not log hibernate messages on Weblogic and Wildfly server if Hibernate loggers are set to 'debug' or 'trace' level
- Quartz triggers sometimes gets blocked
- Add a maxSize limit when setting property values at runtime
Domibus 4.1.3
- Remove unnecessary RMI port usage from ActiveMQ on Tomcat
- Fixed payload encryption at start up of WebLogic cluster
- Fixed subject for certificate imminent expiration alert
- Fixed ListPendingMessages which returned messages in an intermediate state
- CXF Mtom/XOP request contain wrong encoded Content-ID HTTP header
- domain_name.domibus.attachment.temp.storage.location property is missing in sample domain_name-domibus.properties file
- Test Service fails using pushAndPush binding
Domibus 4.1.2
- Possibility to encrypt passwords in the configuration files
- Possibility to encrypt payloads at rest
- Test Service improvements
- JMS Queues statistics
- FS Plugin fix to save the MessageInfo in metadata.xml
- Merge cacerts and custom truststore for DSS extension data loader.
- More properties to configure the datasource on Tomcat
- Optimize Domibus PULL for receiver with multiple legs
- Added the possibility to upload and download PMode file using REST services
- Removed the Domibus payload from being printed to logs if org.apache.cxf is set to INFO in logback.xml - domibus.logging.payload.print property (default to false)
- JMS Plugin queues are available to remote clients for Wildfly 12
- Added Domibus property domibus.logging.cxf.limit to establish the size limit at which messages are truncated in the logs when org.apache.cxf is set to INFO in logback.xml
- Changed the local endpoint transport configuration to allow requests to remote endpoints on http transport (requested by plugin developers)
- Fix rollback issue in case of CRL download exception.
- Upgraded dynamic-discovery-client to version 1.11 (added support for no @scheme DocumentIdentifier/ProcessIdentifier). Dynamic discovery works now for TestService.
at least INFO in logback.xml
- Removed the XSSI characters from the beginning of the JSON response of the External REST API calls.
- Remove parties in Pull processes from TestService UI (Test Service for Pull is not supported in the UI)
- Downloading the CRL via HTTPs is not working
- Backup the truststore before updating it
- The primary key type should be long instead of integer
- Receipt message truncated at the level of the signature
- Issue parsing the Signal message under high concurrency
- Double check the registration of the localConduit
- Unnecessary truststore update
- Cannot delete JMS messages
- Error when sending a message without payload.
- Domibus Logging - issue when stripping payload
- Issue while migrating from 4.0.2 to 4.1.2.
- NotificationListener should be decoupled from the JMS broker
- Message Filtering issue
- Added Domibus property domibus.metrics.monitor.jms.queues.refresh.period in order to cache counting of JMS messages for Metrics page
- Set default value for domibus.dispatcher.allowChunking to false
Domibus 4.1.1
- Alerts for password imminent expiration and expiration are not sent
- Domibus does not work with Proxy
- Issue with MySql 8 when submitting a 'Notify' message
- Update of party's endpoint sometimes fails
Domibus 4.1
- Implement the Split And Join feature
- Implement EU Login Support
- Integrate DSS library
- Support for WebLogic 12.2.x
- Remove support for Wildfly 9
- Add drop wizard statistics to Domibus.
- Add new authentication module using the DSS library.
- Replace dozer with MapStruct
- Multitenancy - Posibility to sort the list of tenants
- Add pull pace control on sender side in case of receiver triggering exception.
- Add a new path:${domibus.config.location}/extensions/lib for loading identity and authorization extensions.
- Upgrade the Tomcat distribution to 8.5.38
- Password policy enforcement for admin users: check complexity, expiration, reuse. Send Alerts on expiration event. Added corresponding properties in configuration.
- Align the WS Plugin/FS Plugin XSDs with the ebMS3 XSD
- Remove domibus.msh.retry.tolerance from domibus.properties
- By default close the HTTP connection between C2 and C3; do not use Keep-Alive anymore by default
- Increase timeout of ListPendingMessages transaction to 5 minutes
- Added a new Logging page into Admin console  - user can change and reset logging levels at runtime
- Cluster configuration: reload truststore, PMode and logging set adn reset will be executed on all cluster servers excepting the current one
- Default password policy enforcement for all users at the backend level;
- Added route and component for changing password when default used or about to expire for all users.
- Renamed property "message.retention.downloaded.max.delete" to "domibus.retentionWorker.message.retention.downloaded.max.delete" and property "message.retention.not_downloaded.max.delete" to "domibus.retentionWorker.message.retention.not_downloaded.max.delete"
- New property "domibus.msh.retry.messageExpirationDelay" to grant a few seconds for scheduling the retry of the last attempt
- Allow PayloadInfo with one PartInfo (one payload) as input in the message metadata.xml of the FS plugin
- Added sendPullReceiptQueue for sending the asynchronous pull receipt
- Added domibus.ui.support.team.name and domibus.ui.support.team.email properties for Support Team information on GUI
- Added a new JMS queue in Default FS Plugin - DomibusFSPluginSendQueue - for improving the speed of sending files in OUT folder
- Allow pull processes with multiple legs configured with the same mpc (enforce same security policy)
- Allow pull processes with 0 or multiple initiators
- Allow pulling based on mpc containing the initiator
- Save message for pulling when mpc attribute is provided
- Implemented default authorization SPI
- Added domain properties domibus.sender.trust.validation.expression to validate the certificate subject
- Added new plugin notifications types for UserMessage fragments
- Plugin Users: add/update/remove operations on PluginUsers should appear in Audit
- Configuration of the standalone WildFly server using the WildFly configuration scripting language instead of XML manipulation
- UI admin console: confirmation message on the Plugin Users page
- User related alerts should also be sent to the user
- Domibus GUI - add the posibility to hide Domain selector for some pages
- When C3 receives a message, check that the sender certificate used for the signature belongs to the party present in the from field
- Fixed sidebar disappearing when user presses Esc
- Possibility to upload a PKCS12 truststore
- Alerts management for super users
- Remove the retry tolerance mechanism
- File System Plugin sends files while being copied
- FS Plugin: Possibility to configure the cid and part info properties
- WildFly: Update the BouncyCastle in the jboss-deployment-structure.xml
- Missing message ID information in some Domibus logs
- Transaction timeout when FS Plugin downloads large files
- Harmonise the context path across the supported servers to /domibus
- Upgrade several libraries to the latest version
- Domibus MSH Service should return a text on GET
- Replace Dozer with MapStruct
Domibus 4.0.2
- Improved the logging in the Default JMS Plugin
- Allow sending an XML payload in the Soap body
- Adapt the configuration for the connection pooling in Tomcat
- Fixed the caching for the downloaded CRLs
- Allow proxy configuration without user/password
- Improved the duplicate detection
- Default FS Plugin: add configuration for message payload identifiers
- Allow proxy configuration without user/password
Domibus 4.0.1
- Changes in order to improve logging for multitenancy:
    - domibus.log, business.log and security.log will contains only entries without domain information
    - a logback.xml file for 'default' domain should be added always apart from the other domains
- Add email alert support for super user login failure and account disabled.
- WebLogic cluster: fixed the PMode and truststore refresh when the WebLogic cluster was composed of more than 2 managed servers
  The uniform distributed topics do not work correctly in WebLogic 12.1.3. JMS messages are not correctly replicated to all managed servers when the cluster is composed of more than 2 managed servers.
- Fixed submitting of messages via the Default JMS Plugin in in multi-tenancy mode
- Fix the retry issue for restored messages.
- Increase to 5 minutes the transaction timeout of ListPendingMessages operation in the Default WS Plugin
- Add configurable property for AS4 transport profile in the dynamic discovery process
- Fixed the parsing of service and action values in case of Peppol dynamic discovery
- Fixed reading alerts configuration for users in default domain and super-users
- Allow empty "ConversationID" in the message sent by C1
- Add possibility to exclude a protocol from the CRL list; stops at first positive or negative aoutcome;
- Fixed alerts stuck in SEND_ENQUEUED state due to missing clearCurrentDomain
- Moved UIReplication insert SQL script to distribution
Domibus 4.0
- Default WS Plugin: the XSD schema validation has been disabled by default due to performance reasons
- Removed unused classes:Validator<T>,NullValidator,ValidationException
- Support for email alert system
- Support for multi-tenancy
- Sample domain configuration file domain_name-domibus.properties included in the distribution.
- Management of participants through the administration console
- Removed the module domibus-ext-services-api and moved all services from domibus-ext-services-api to the plugin-api
- Security policies were updated and renamed. Sample pModes were updated to use the new policies.
  New policies are:
      eDeliveryAS4Policy.xml - Reference to a Subject Key Identifier
      eDeliveryAS4Policy_BST.xml - Reference to a Binary Security Token
      eDeliveryAS4Policy_IS.xml - Reference to an Issuer and Serial Number
  Message exchange using old and new policies is not possible in all combinations.
  Therefore, custom pModes should also be updated to the new policies. Replace eDeliveryPolicy.xml and eSensPolicy(.v2.0).xml with the new eDeliveryAS4Policy.xml.
  Replace both eDeliveryPolicy_CA.xml and eSensPolicy.v2.0_CA.xml with the new eDeliveryAS4Policy_BST.xml
- Each plugin can now specify its own list of notification types for which it expects notifications.
- Upgraded the following libraries:hibernate, atomikos,spring,liquibase,junit
- Upgraded to Java 8
- Domibus support for Wildfly 12
- Add an audit and versioning system
- Possibility to have information of all PMode changes' history
- Possibility to export the contents of a datatable to CSV
- Removed deprecated methods from ws-plugin: sendMessage, downloadMessage, getMessageStatus
- Internalize EhCache configuration and give possibility to override it
- Added OWASP Dependency Check Maven Plugin to identify vulnerable dependencies
- Possibility to Test the connections with other Access Points
- Possibility to reactivate suspended super users
- The password for plugin users migrated to BCryptPasswordEncoder
- Configurable Domibus Admin Console title
- Fixed an issue when receiver is not authorized to get the status of his destined message when security is enabled
- Support for LDAP CRLs
- Handled the not existing folder issue for domibus.attachment.storage.location
- Fixed an issue when eb3:MessageProperties section is missing from the User Message
- Fixed an issue when PartProperties section defined in PartInfo missing from the User Message
- Editable text area for Pmode
- With secure login enabled, Sender is not authorized to get the status of his message
- With secure login enabled - can't retrieve message if not authorized user tried to retrieve it earlier
- Implement the Plugin Users page
- Fix the Unique Particle Attribution violations in the Default WS Plugin
- The ebMS3 headers Description and Schema from PartInfo are deprecated. These headers were removed from the WS-plugin XSD and the JMS-plugin message properties.
  When received on the MSH, these headers are ignored.
- The notifications events sent to the plugins should be configurable
- Support for the new PEPPOL PKI. Maintain backwards compatibility with the old PEPPOL PKI. Tested in multi-tenancy mode, one domain
  uses old PKI while other domain uses the new PKI.
- Added a new feature when the GUI loads Messages page from a single table, speed up the search for large DB volumes
- Improve performance of Messages page when DB contains > 300k records
- Possibility to resend messages with status SEND_ENQUEUED
- Allow plugins to load their xml config files from the jars
- Improvements to Weblogic WLST
- Fixed bug when PKCS12 format was not supported for keystore/truststore
Domibus 3.3.4
- Performance improvement in the Messages page
- The order of the PartInfo payloads sent by the backend is preserved from C1 to C4.
- Change the pulling mechanism in order to have a better message per second throughput.
- Changes to support the fixed values of PEPPOL AS4 profile in the dynamic discovery lookup.
- Added new truststore entries for OASIS SMP.
- Add proxy configuration option for Peppol lookup
- Updated the configuration for using MySQL Connector/J 8.0.x
- Added one property domibus.fourcornermodel.enabled=true. If the property is set to false, 'Final Recipient' and 'Original Sender'
    criteria disappear from Messages Filter, Messages column picker and from Message details in the GUI. The internal SQL queries for
    User and Signal Message do not use TB_PROPERTY.NAME = 'finalRecipient' and 'originalSender' anymore
- Fixed issue when starting Domibus on Tomcat with an external ActiveMQ broker
- Default WS Plugin: listPendingMessages does not always retrieve all the pending messages
- Domibus 3.3.x Admin Console doesn't open when using SSL
- Uninitialized keystore error while getting certificate from the keystore
- Oracle deletion script sample date or format is incorrect
- Empty Lines in Oracle SQL Upgrade Script causes script failure
- Self Send not working in Dynamic discovery
Domibus 3.3.3
- Possibility to send a message to the same Access Point
Domibus 3.3.2
- Add certificate revocation logging.
    When a certificate is about to expire a warning message will be displayed in the logs.
    When a certificate has expired a error message will be displayed in the logs.
- Several other log improvements
- Corrected logs configuration in logback.xml file which have cause wrong info to be written to business log file
- When FS-Plugin will be used on Receiver Domibus installation, metadata.xml will be written along with payload(s) into Incoming folder
- Added Database delete (cleanup) scripts for MySQL and Oracle - these will be provided into Domibus sql-scripts distribution .zip file
- Corrected the retry policy for the DomibusSendMessageQueue and DomibusPullMessageQueue for WildFly distribution
Domibus 3.3.1
- Add an account locking policy mechanism. When a user has failed to provide the correct password five times, his account will be locked for a configurable amount of time (default to one hour).
- Allow plugins to retrieve the metadata of a User Message
- Fixed an issue in the reliability checker
- Fixed an issue in the receipt generated on WildFly
- Fixed the receiving of messages with uncompressed payloads when compression is activated in the PMode
Domibus 3.3
- Additional validation on pMode upload: when @type is missing or is empty, the value of PartyId, Service and AgreementRef, must be an URI (relative URIs accepted).
- Use optional regex validation for dynamic discovery certificate. New property domibus.dynamic.discovery.oasisclient.regexCertificateSubjectValidation.
- Fix sendAttempt counter (initial one plus number of retries defined in the pmode)
- Block the receiving of the message in case the sender's certificate is not valid or revoked.
    Two more properties were added (for more details check domibus.properties file):
        o domibus.sender.certificate.validation.onsending=true
        o domibus.sender.certificate.validation.onreceiving=true
    Renamed "domibus.senderparty.trust.verification" to "domibus.sender.trust.validation.onreceiving". Default value "false" has not been changed.
    Renamed "domibus.certificate.validation.enabled" to "domibus.receiver.certificate.validation.onsending". Default value "true" has not been changed.
- Discard domibus.internal.dispatch.queue from using the DLQ queue.
- Discard domibus.internal.pull.queue from using the DLQ queue.
- Possibility to notify the plugins when the message status changes; new method added in the plugin API: eu.domibus.plugin.BackendConnector.messageStatusChanged(eu.domibus.common.MessageStatusChangeEvent)
- Included the payload location as a property of the JMS Message
- New default Domibus plugin added: FileSystem Plugin
- Performance improvements
- Configuration of Domibus is done with domibus.properties instead of externalized spring xml files
- Add the possibility to pull messages
- Expose the DOWNLOADED message status in the plugin API and the default ws plugin
- Deprecated the methods eu.domibus.plugin.AbstractBackendConnector.getMessageStatus(String messageId) and eu.domibus.plugin.handler.MessageRetriever.getMessageStatus(String messageId) which converts the DOWNLOADED status to RECEIVED. Use the new getStatus(String messageId) method instead.
- Deprecated the following methods from eu.domibus.plugin.webService.impl.BackendWebServiceImpl in the Default WS Plugin:
    o sendMessage(SubmitRequest, Messaging). Use submitMessage(SubmitRequest, Messaging) which add support for large files.
    o downloadMessage(RetrieveMessageRequest, Holder, Holder). Use retrieveMessage(RetrieveMessageRequest, Holder, Holder) which add support for large files.
    o getMessageStatus(StatusRequest). Use getStatus(StatusRequest) which converts the DOWNLOADED status to RECEIVED.
- Migrated the logging framework to SLF4J and Logback
- Domibus uses 3 logs files: domibus.log, domibus-business.log and domibus-security.log
- JMS monitoring: fixed the computation of the total number of messages in the queue for WebLogic
- JMS monitoring: fixed the search of the JMS messages for WebLogic(for JMS messages having property with null values) and Tomcat(for JMS messages with no "Text" property)
- JMS monitoring: extended the functionality for clustered installations.
- Core: listPendingMessages and download operations behave correctly in case of a clustered installation.
- Core: Spring services are always executing within a transaction even if there is no specific @Transactional annotation present
- Core: Quartz integration with managed threads in WebLogic and WildFly
- Core: during sendMessage operation, Domibus verifies that the parties roles are allowed (present in PMode) and different among them.
- Core: during sendMessage operation, Domibus verifies that the message is being sent by the same party as the one configured as the sending access point.
- Core: during sendMessage operation, Domibus trims the leading and trailing whitespaces in all the request fields.
- Core: during sendMessage operation, Domibus verifies that, if MessageId and RefToMessageId is specified by backend client, then it should contain only printable ASCII characters.
- Core: during sendMessage operation, all validations comparisons with the PMode data are case insensitive.
- Core: during MSH dispatch operation, Domibus verifies the validity of sender's certificate. The sender party name needs to be the same as the certificate alias from the keystore.
- Core: during MSH receive operation, Domibus can verify the trust of the sender if activated.
- Core: validation on MessageId and RefToMessageId can be by-passed by removing the key "domibus.sendMessage.messageIdPattern" from configuration file.
- Core: new configuration properties added for ConnectionTimeout and ReceiveTimeout to allow fine tuning of the access points' conduit.
- Core: provision added to support the "DoNothing security" policy (no security, no encryption).
- Core+Plugins: added the DOWNLOADED status to message state workflow. This new status is also visible through the console.
- DB: MySQL installation of Domibus database is set to have collation of 'UTF8_BIN' to make DB level string comparison (in SQLs) case sensitive. This will enable support for case sensitive message ids.
- WS Plugin: the response list of ListPendingMessages operation can be limited using a new configuration property (domibus.listPendingMessages.maxCount).
- Config: increased the value of the retry tolerance to 3 hours
- Config: added new property "domibus.sendMessage.failure.delete.payload" to enable/disable the removal of the message payload on send failure.
- Core: the core exposes services via the new domibus-ext-services-api module
- Core: possibility to register message acknowledgments using the Java API and the REST core services
- Core: possibility to monitor and manage messages using the Java API and the REST core services
- JMS: In ActiveMQ message redelivery is now configured solely on the broker;The client / connection factory will not try to redeliver anymore.
Domibus 3.2.5
- Dynamic discovery: integrate Domibus with OASIS compliant SMP
- Added new security policy file, eSensPolicy.v2.0_CA.xml to support embedded public certificate
- Fixed the JMS property names used in the default-jms-plugin
- Persist raw request/response headers for non repudiation purposes
- Possibility to use AND/OR operator in the message filter routing criteria
- Ignore LDAP CRL endpoints when checking certificates revocation
- Block the sending of the message in case the receiver certificate is not valid or revoked
Domibus 3.2.4
- Default WS plugin: backwards compatibility fix for Domibus >3.2.2
- Fix error when downloading a message with an empty payload
- CachingPModeProvider fix when Oracle database is used
Domibus 3.2.3
- JMS monitoring: extended the functionality for clustered installations.
- Core: listPendingMessages and download operations behave correctly in case of a clustered installation.
- The MSH WS endpoint returns 200 for the GET operation
- Renamed the eSensPolicy.xml WS policy to eSensPolicy.v2.0.xml which supports the signing of the empty body
- Added the domibus-plugins.xml file in the configuration of the Tomcat full installation
Domibus 3.2.2
- Possibility to configure the limit of downloaded/not-downloaded messages for the retention worker
- Fixed the notifications sent by the JMS plugin
- Deprecated the method "void messageReceiveFailed(String messageId, String ednpoint)" from the BackendConnector interface and added a new method "void messageReceiveFailed(MessageReceiveFailureEvent messageReceiveFailureEvent)"
- Changed the default JMX password for WebLogic
- Fixed the search of the JMS messages for WebLogic(for JMS messages having property with null values) and Tomcat(for JMS messages with no "Text" property)
- Solved issue related to CXF attachment temp file leakage (for payloads over 200Mb).
- New configuration properties added for ConnectionTimeout and ReceiveTimeout for connection between access points.
- Fixed Domibus integration with SMP/SML
- Fixed bug about the retention (downloaded and undownloaded) parameters. Downloading the message, its status will be set to DOWNLOADED.
- Fixed message cannot be downloaded, when the message retention download is set to 0 and the file storage is used.
Domibus 3.2.1
- JMX access to the JMS queues is secured
- Force the usage of the apache commons IO library from the application
- Possibility to load the logging configuration file from ${domibus.conf.location} for WebLogic/WildFly/Tomcat
Domibus 3.2-FR
- Added authentication/authorization example to the WS default plugin. Disabled by default, to assure backwards compatibility with older versions.
- Added XSD validation of the PMODE when it is uploaded by the user.
- Fixed the filtering and the pagination on the "Message Log" page
- Changed table names to be all UPPERCASE to fix the issue related to case sensitivity on Linux.
- Fixed the download message request issue when the schema validation and MTOM are both enabled.
- Schema validation for all WS operations is enabled by default. MTOM is disabled by default.
- Fixed the filtering and the pagination on the Message Log and the Error Log pages.
- Fixed issue with the signal messages that were not stored/cleared.
- Message Log page is now showing also the signal messages.
- Fixed issue about message delete timestamp not correctly set and MessageRetentionService failing to clear data of downloaded and retained messages.
- Fixed the retry mechanism in the JMS listeners
Domibus 3.2-RC1
- Added XSD validation for the operations exposed by the backend WS
- Harmonize the plugin registration on Tomcat/WebLogic/WildFly
- CRL validation
- Backend WS, interface changed as for operations getMessageStatus and getMessageErrors
- Enabled MTOM for backend WS.
- Ping messages are not stored/delivered to the backend
- Possibility to validate the payload using custom validators
- JMS monitoring via the Admin page
- Added support for dead letter queues
- Added support for Java 8
- Added dynamic hash calculation of config files
- All tests are performed using database and filesystem storage options.
Domibus 3.1.1
- Fixed retry logic issue
- Set BINARY_DATA type to LONGBLOB on mysql (migration scripts created)
- Fixed the issue with the missing "value" in the <env:Code> when an error response is returned
- Fixed the issue when checking the agreementRef sent in the header's message and the agreement configured in the PMode
- Fixed the environment variable domibus.config.location for WildFly distribution running on Linux
Domibus 3.1.0
- Fixed issue when sending a message with an ID that is over 255 characters long
- Fixed issue when sending a message with an ID that was already used
- Fixed issue when trying to download a message from the sender gateway
- Fixed retention check (MPC) during download Message
- Fixed a backend notification error "could not notify backend of rejected message"
- Fixed Data truncation: Data too long for column 'ERROR_DETAIL'
- Fixed transaction management for Weblogic
- Added support for WildFly 9.0.2
- Improved the error codes and messages when submission fails
- Atomikos warnings are not shown anymore in the logs
- The ThroughPutLimiter has been removed.
- The Truststore is now reloaded during the PMode upload
- The domibus-security.xml is not compatible with the one of previous releases
- Logging is now using DailyRollingFileAppender
Domibus 3.1-RC2
- Fixed issue on JMS plugin when no ServiceType is set
- Fixed a MimeType issue when compression is enabled
- Validated that payload href is always preceded by "cid:"
- Fixed connectivity issue, 200 OK with a valid receipt rejected by Domibus
- Fixed a bug on RefToMessageId missing from the receipt when signaling an error
- Fixed two generic AS4 Minder test cases failing due to invalid error code returned for expected decompression issues
- Pass conformance tests against Minder
- Separate packaging for sample configuration and testing
Domibus 3.1-RC1
- Added support for clustering
- Added support of Weblogic 12c
- Additional unit testing
- Introduction of the new plugin architecture
- Improved documentation
- Fixing bugs and issues
Domibus 3.0-Beta 1
 - initial release of Domibus 3
Domibus 3.0-Beta 2
 - bugfixes for several minor issues
 - major documentation update
 - PMode upload functionality
Domibus 3.0-RC1
 - bugfixes for several minor issues
 - example implementation of JMS integration
 - documentation update
 - rework of submission module
 - support for property and payload profiling
 Domibus 3.0-RC2
 - bugfixes
 Domibus 3.0-RC3
 - bugfixes
 - experimental SMP/SML support


